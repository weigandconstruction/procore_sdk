# NOTE: This file is auto generated by OpenAPI Generator 7.12.0 (https://openapi-generator.tech).
# Do not edit this file manually.

defmodule Procore.Api.CoreProjectDirectoryProjectDistributionGroups do
  @moduledoc """
  API calls for all endpoints tagged `CoreProjectDirectoryProjectDistributionGroups`.
  """

  alias Procore.Connection
  import Procore.RequestBuilder

  @doc """
  Delete Project Distribution Group
  Delete a Distribution Group associated with the given Project.

  ### Parameters

  - `connection` (Procore.Connection): Connection to server
  - `procore_company_id` (integer()): Unique company identifier associated with the Procore User Account.
  - `project_id` (integer()): Unique identifier for the project.
  - `distribution_group_id` (integer()): Unique identifier for the distribution group.
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec rest_v10_projects_project_id_distribution_groups_distribution_group_id_delete(
          Tesla.Env.client(),
          integer(),
          integer(),
          integer(),
          keyword()
        ) ::
          {:ok, nil}
          | {:ok, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response.t()}
          | {:ok,
             Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response.t()}
          | {:error, Tesla.Env.t()}
  def rest_v10_projects_project_id_distribution_groups_distribution_group_id_delete(
        connection,
        procore_company_id,
        project_id,
        distribution_group_id,
        _opts \\ []
      ) do
    request =
      %{}
      |> method(:delete)
      |> url("/rest/v1.0/projects/#{project_id}/distribution_groups/#{distribution_group_id}")
      |> add_param(:headers, :"Procore-Company-Id", procore_company_id)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {204, false},
      {400, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {401, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {403, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {404,
       Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response},
      {422, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response}
    ])
  end

  @doc """
  Show Project Distribution Group
  Show detail on a specified Project Distribution Group

  ### Parameters

  - `connection` (Procore.Connection): Connection to server
  - `procore_company_id` (integer()): Unique company identifier associated with the Procore User Account.
  - `project_id` (integer()): Unique identifier for the project.
  - `distribution_group_id` (integer()): Unique identifier for the distribution group.
  - `opts` (keyword): Optional parameters
    - `:view` (String.t): Parameter affecting what level of detail will be returned from the endpoint. 'extended' will include the users in the distribution group.
    - `:include_ancestors` (boolean()): Parameter affecting what groups can be returned from this endpoint. When 'true', this endpoint will only return distribution groups with users that match the provided (or default) `domain_id` and `min_ual` / `ual`. Company level distribution groups can be viewed as well if they have users matching the provided (or default) permissions.  If `extended` view is requested, only the users with matching permissions will be returned in the response.  When `include_ancestors` is false or absent, only Project level groups can be viewed.
    - `:domain_id` (integer()): Parameter affecting the scope for the Distribution Groups, by default it is the Domain ID of the Submittals Tool. Will return only Distributions Groups who users that have access to the Tool specified by the domain_id. Only applies to requests that also have include_ancestors set to 'true'.
    - `:min_ual` (integer()): Parameter affecting the scope for the Distribution Groups, by default it is the 'read' user access level. Will return only Distributions Groups who users that have the min ual specified by the 'min_ual'. Only applies to requests that also have include_ancestors set to 'true'.
    - `:ual` (integer()): Parameter affecting the scope for the Distribution Groups.  Will return only Distributions Groups who users that have the exact ual specified by the 'ual'. If provided, this will take precendence over min_ual.  Only applies to requests that also have include_ancestors set to 'true'.

  ### Returns

  - `{:ok, Procore.Model.RestV10ProjectsProjectIdDistributionGroupsDistributionGroupIdGet200Response.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec rest_v10_projects_project_id_distribution_groups_distribution_group_id_get(
          Tesla.Env.client(),
          integer(),
          integer(),
          integer(),
          keyword()
        ) ::
          {:ok, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response.t()}
          | {:ok,
             Procore.Model.RestV10ProjectsProjectIdDistributionGroupsDistributionGroupIdGet200Response.t()}
          | {:ok,
             Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response.t()}
          | {:error, Tesla.Env.t()}
  def rest_v10_projects_project_id_distribution_groups_distribution_group_id_get(
        connection,
        procore_company_id,
        project_id,
        distribution_group_id,
        opts \\ []
      ) do
    optional_params = %{
      :view => :query,
      :include_ancestors => :query,
      :domain_id => :query,
      :min_ual => :query,
      :ual => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/rest/v1.0/projects/#{project_id}/distribution_groups/#{distribution_group_id}")
      |> add_param(:headers, :"Procore-Company-Id", procore_company_id)
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200,
       Procore.Model.RestV10ProjectsProjectIdDistributionGroupsDistributionGroupIdGet200Response},
      {401, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {403, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {404,
       Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response}
    ])
  end

  @doc """
  Update Project Distribution Group
  Update a Distribution Group associated with the given Project.

  ### Parameters

  - `connection` (Procore.Connection): Connection to server
  - `procore_company_id` (integer()): Unique company identifier associated with the Procore User Account.
  - `project_id` (integer()): Unique identifier for the project.
  - `distribution_group_id` (integer()): Unique identifier for the distribution group.
  - `update_distribution_group_body` (UpdateDistributionGroupBody): 
  - `opts` (keyword): Optional parameters
    - `:"Idempotency-Token"` (String.t): Unique idempotent token

  ### Returns

  - `{:ok, Procore.Model.ExtendedView.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec rest_v10_projects_project_id_distribution_groups_distribution_group_id_patch(
          Tesla.Env.client(),
          integer(),
          integer(),
          integer(),
          Procore.Model.UpdateDistributionGroupBody.t(),
          keyword()
        ) ::
          {:ok, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response.t()}
          | {:ok, Procore.Model.ExtendedView.t()}
          | {:ok,
             Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response.t()}
          | {:error, Tesla.Env.t()}
  def rest_v10_projects_project_id_distribution_groups_distribution_group_id_patch(
        connection,
        procore_company_id,
        project_id,
        distribution_group_id,
        update_distribution_group_body,
        opts \\ []
      ) do
    optional_params = %{
      :"Idempotency-Token" => :headers
    }

    request =
      %{}
      |> method(:patch)
      |> url("/rest/v1.0/projects/#{project_id}/distribution_groups/#{distribution_group_id}")
      |> add_param(:headers, :"Procore-Company-Id", procore_company_id)
      |> add_param(:body, :body, update_distribution_group_body)
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, Procore.Model.ExtendedView},
      {400, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {401, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {403, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {404,
       Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response},
      {422, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response}
    ])
  end

  @doc """
  List Project Distribution Groups
  Return a list of all Distribution Groups associated with a Project.

  ### Parameters

  - `connection` (Procore.Connection): Connection to server
  - `procore_company_id` (integer()): Unique company identifier associated with the Procore User Account.
  - `project_id` (integer()): Unique identifier for the project.
  - `opts` (keyword): Optional parameters
    - `:page` (integer()): Page
    - `:per_page` (integer()): Elements per page
    - `:"filters[search]"` (String.t): Returns item(s) matching the specified search query string.
    - `:sort` (String.t): Return items with the specified sort.
    - `:view` (String.t): Parameter affecting what level of detail will be returned from the endpoint. 'extended' will include the users included in each distribution group.
    - `:include_ancestors` (boolean()): Parameter affecting what groups will be returned from this endpoint. When 'true', this endpoint will only return distribution groups with users that match the provided (or default) `domain_id` and `min_ual` / `ual`.  Company level distribution groups will be returned as well if they have users matching the provided (or default) permissions.  If `extended` view is requested, only the users with matching permissions will be returned in the response.  When `include_ancestors` is false or absent, only Project level groups will be returned.
    - `:domain_id` (integer()): Parameter affecting the scope for the Distribution Groups, by default it is the Domain ID of the Submittals Tool. Will return only Distributions Groups who users that have access to the Tool specified by the domain_id. Only applies to requests that also have include_ancestors set to 'true'.
    - `:min_ual` (integer()): Parameter affecting the scope for the Distribution Groups, by default it is the 'read' user access level. Will return only Distributions Groups who users that have the min ual specified by the 'min_ual'. Only applies to requests that also have include_ancestors set to 'true'.
    - `:ual` (integer()): Parameter affecting the scope for the Distribution Groups.  Will return only Distributions Groups who users that have the exact ual specified by the 'ual'. If provided, this will take precendence over min_ual.  Only applies to requests that also have include_ancestors set to 'true'.

  ### Returns

  - `{:ok, [%RestV10ProjectsProjectIdDistributionGroupsGet200ResponseInner{}, ...]}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec rest_v10_projects_project_id_distribution_groups_get(
          Tesla.Env.client(),
          integer(),
          integer(),
          keyword()
        ) ::
          {:ok, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response.t()}
          | {:ok,
             [Procore.Model.RestV10ProjectsProjectIdDistributionGroupsGet200ResponseInner.t()]}
          | {:error, Tesla.Env.t()}
  def rest_v10_projects_project_id_distribution_groups_get(
        connection,
        procore_company_id,
        project_id,
        opts \\ []
      ) do
    optional_params = %{
      :page => :query,
      :per_page => :query,
      :"filters[search]" => :query,
      :sort => :query,
      :view => :query,
      :include_ancestors => :query,
      :domain_id => :query,
      :min_ual => :query,
      :ual => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/rest/v1.0/projects/#{project_id}/distribution_groups")
      |> add_param(:headers, :"Procore-Company-Id", procore_company_id)
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, Procore.Model.RestV10ProjectsProjectIdDistributionGroupsGet200ResponseInner},
      {401, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {403, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response}
    ])
  end

  @doc """
  Create Project Distribution Group
  Create a new Distribution Group associated with the given Project.

  ### Parameters

  - `connection` (Procore.Connection): Connection to server
  - `procore_company_id` (integer()): Unique company identifier associated with the Procore User Account.
  - `project_id` (integer()): Unique identifier for the project.
  - `create_distribution_group_body` (CreateDistributionGroupBody): 
  - `opts` (keyword): Optional parameters
    - `:"Idempotency-Token"` (String.t): Unique idempotent token

  ### Returns

  - `{:ok, Procore.Model.ExtendedView.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec rest_v10_projects_project_id_distribution_groups_post(
          Tesla.Env.client(),
          integer(),
          integer(),
          Procore.Model.CreateDistributionGroupBody.t(),
          keyword()
        ) ::
          {:ok, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response.t()}
          | {:ok, Procore.Model.ExtendedView.t()}
          | {:ok,
             Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response.t()}
          | {:error, Tesla.Env.t()}
  def rest_v10_projects_project_id_distribution_groups_post(
        connection,
        procore_company_id,
        project_id,
        create_distribution_group_body,
        opts \\ []
      ) do
    optional_params = %{
      :"Idempotency-Token" => :headers
    }

    request =
      %{}
      |> method(:post)
      |> url("/rest/v1.0/projects/#{project_id}/distribution_groups")
      |> add_param(:headers, :"Procore-Company-Id", procore_company_id)
      |> add_param(:body, :body, create_distribution_group_body)
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, Procore.Model.ExtendedView},
      {201, Procore.Model.ExtendedView},
      {400, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {401, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {403, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response},
      {404,
       Procore.Model.RestV10WorkOrderContractsWorkOrderContractIdSubcontractorScheduleOfValuesStatusPatch404Response},
      {422, Procore.Model.RestV10CompaniesCompanyIdWorkflowPermanentLogsGet401Response}
    ])
  end
end
